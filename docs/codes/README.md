docs/codes
==========

このフォルダでは原版のコードを解析して得た情報を、ルーチンごとにファイルに分けて管理しています。
各ドキュメントの文字コードは`UTF-8`です。

## 各サブフォルダの用途
現在は以下のとおりです。
スクリプトは当フォルダ以下のmdファイルを操作しています。

-   ## <2桁の16進数>
    各ルーチンはそれぞれがマップされているバンクの中にファイルを配置する運用にしています。
    ここにあるファイルをメンテナンスしています。

    各バンクの利用方法は大まかには次のとおりです。
    -   コード
        -   1e, 1f: 詳細不明(おそらくイベント関連)
        -   2e, 2f, 32, 33: 戦闘時の画面処理(PPU)関連
        -   30, 31, 34, 35: 戦闘関連のゲームロジック
        -   36, 37: サウンドドライバー
        -   3a, 3b, 3c, 3d: メニュー処理、フロアのゲームロジック
        -   3e, 3f: 汎用ロジック、非戦闘時のウインドウ関連、テキスト処理ロジックなど
    -   データ
        -   00 ... 06: マップ、マップチップのビットマップ、スプライトの構成データ
        -   06: フィールドマップ 構成データ
        -   0a ... 0f: スプライト・マップ ビットマップ
        -   0e, 0f: スプライト(人) ビットマップ
        -   10: 敵キャラパラメータ、イベント構成データ
        -   11: フロアマップ 構成データ
        -   18 ... 1e: テキスト
        -   20 ... 29: 敵キャラ ビットマップ
        -   2a, 2b: エフェクト ビットマップ・構成データ
        -   2c, 2d: NPC配置データ
        -   39: 経験値テーブル

-   ## _drafts
    新しいルーチンのドキュメントを作成する際に利用する作業用フォルダです。
    ここにあるドキュメントは基本的に作業中のものです。

-   ## _pandoc
    [pandoc](http://pandoc.org/MANUAL.html#general-options)関連のファイルです。
    ルーチンごとに分けたドキュメントから包括的なドキュメントを生成するために利用しています。

    テンプレートは[sidebar-toc-template](https://github.com/Mushiyo/pandoc-toc-sidebar)をカスタマイズして使っています。

## ドキュメント管理のワークフロー
とりあえずこれで運用中!

1.  `./give-me-choco.ps1 <bank><address>`を実行する
2.  (既存ドキュメントがない場合)`_drafts`以下にmdファイルができるので編集する
3.  `./finalize-drafts.ps1 -target <#2のファイル>`を実行する
4.  各バンクのフォルダに入るのでおしまい
5.  (オプション) `./comiple-docs.ps1`を実行して`code-reference.html`を生成する
