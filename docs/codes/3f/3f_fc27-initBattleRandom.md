
# $3f:fc27 initBattleRandom


	$fc34 29 02	and #$02
	$fc36 18	clc
	$fc37 69 03	adc #$03	;;#3(FC版オリジナル)だとドロップテーブル3番までしか落とさない
	$fc39 85 22	sta $22
	$fc3b a9 01
	
## code:
```js
{
	for ( x = 0;x < 256;x++) a += $00.x;
	$15,16,17 = a;
$fc34:
	a = a & 2 + 3; //3 or 5
	$22 = a;
	$20 = 1;
	$21 = 0;
	for (y = 0; y < 256;y++) {
		div( mul16($22,$20)&0xff , 0x400);
		//余りが201h以上なら400hから引いて反転する
		a = $1e | ($1f - 2); //$1e,1f=remain
		if (a != 0 && ($1f - 2) >= 0) {
			//$1e = -$1e;
			//$1f = 4 - $1f;
			$1e,1f = 0x400 - $1e,1f
		}
		//fc81:
		//$21 = a = $1f;
		//a >>= 1;
		//$20 = a = $1e;
		$20,21 = $1e,1f
		//ror a; //carry = $1f&1
		a = ($1f&1 <<7) | ($1e>>1)
		$7be3.y = a; //a: 余>>1
	}
}
```



